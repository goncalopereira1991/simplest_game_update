<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/general.css" />
        <title>World Simplest Game</title>
    </head>
    <body>
        <div>
            Press the tiles and see how many points you can get
            <br />
            <p id="timer_label">Time Left: </p><p id="timer"></p>
            <button id="btn_start">Start</button>
            <br /><br />
            <div id="result_str"> Points <div id="result">9001</div></div>
            <br />
            <button id="tile1" class="tile"></button>
            <button id="tile2" class="tile"></button>
            <br />
            <button id="tile3" class="tile"></button>
            <button id="tile4" class="tile"></button>
        </div>
    </body>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript">
        function startTimer(duration, display) {
            var seconds = duration;
            var interval = setInterval(function () {
                seconds=seconds-1;
                display.textContent = seconds;

                if (seconds <= 0) {
                    var result=Number($('#result').html());
                    $('#timer_label').css("display", "none");
                    $('#timer').css("display", "none");
                    $('#btn_start').css("display", "none");
                    alert("Conseguiu fazer "+result+" pontos!");
                    clearInterval(interval);
                }
            }, 1000);
        };

        $('#btn_start').click(function(){
            var tile1_status = $('#tile1').css("display");
            var tile2_status = $('#tile2').css("display");
            var tile3_status = $('#tile3').css("display");
            var tile4_status = $('#tile4').css("display");

            tile_array=["#tile1","#tile2","#tile3","#tile4"];

            //if(tile1_status=="none" && tile2_status=="none")
                //$('.tile').css("display", "inline-block");
           // else
            $('.tile').css("display", "none");
            var random = Math.floor((Math.random() * 4) + 0);
            $('#result').html("0");
            $('#btn_start').css("display", "none");
            $(tile_array[random]).css("display", "inline-block");
            $("#timer_label").css("display", "inline-block");
            $("#timer").css("display", "inline-block");
            var seconds_to_play = 20, display = document.querySelector('#timer');
            $('#timer').html(seconds_to_play);
            startTimer(seconds_to_play, display);
        });

        $('#tile1').click(function(){
            var tile1_status = $('#tile1').css("display");
            tile_array=["#tile2","#tile3","#tile4"];
            var current_points=Number($('#result').html());

            if(tile1_status!="none")
            {
                var random = Math.floor((Math.random() * 3) + 0);
                $('#result').html(current_points+1);
                $('#tile1').css("display", "none");
                $(tile_array[random]).css("display", "inline-block");
            }
        });

        $('#tile2').click(function(){
            var tile1_status = $('#tile2').css("display");
            tile_array=["#tile1","#tile3","#tile4"];
            var current_points=Number($('#result').html());

            if(tile1_status!="none")
            {
                var random = Math.floor((Math.random() * 3) + 0);
                $('#result').html(current_points+1);
                $('#tile2').css("display", "none");
                $(tile_array[random]).css("display", "inline-block");
            }
        });

        $('#tile3').click(function(){
            var tile1_status = $('#tile3').css("display");
            tile_array=["#tile1","#tile2","#tile4"];
            var current_points=Number($('#result').html());

            if(tile1_status!="none")
            {
                var random = Math.floor((Math.random() * 3) + 0);
                $('#result').html(current_points+1);
                $('#tile3').css("display", "none");
                $(tile_array[random]).css("display", "inline-block");
            }
        });

        $('#tile4').click(function(){
            var tile1_status = $('#tile4').css("display");
            tile_array=["#tile1","#tile2","#tile3"];
            var current_points=Number($('#result').html());

            if(tile1_status!="none")
            {
                var random = Math.floor((Math.random() * 3) + 0);
                $('#result').html(current_points+1);
                $('#tile4').css("display", "none");
                $(tile_array[random]).css("display", "inline-block");
            }
        });

    </script>
    

</html>